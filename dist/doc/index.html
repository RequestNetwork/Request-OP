
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="icon" href="images/favicon.png" type="image/x-icon">

    <title>Request Network for developers</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;code&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="Logo" />
      <img src="images/name.png" class="name" alt="Name" />
        <div class="lang-selector">
              <a href="#" data-language-name="code">code</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="introduction">Introduction</a>
          </li>
          <li>
            <a href="#getting-started" class="toc-h1 toc-link" data-title="getting-started">Getting Started</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#dependencies" class="toc-h2 toc-link" data-title="dependencies">Dependencies</a>
                  </li>
                  <li>
                    <a href="#instanciate-request-network-js" class="toc-h2 toc-link" data-title="instanciate-request-network-js">Instanciate request-network.js</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#signing-a-request" class="toc-h1 toc-link" data-title="signing-a-request">Signing a request</a>
          </li>
          <li>
            <a href="#using-request-network-39-s-gateway" class="toc-h1 toc-link" data-title="using-request-network-s-gateway">Using Request Network's gateway</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#redirecting-to-gateway" class="toc-h2 toc-link" data-title="redirecting-to-gateway">Redirecting to gateway</a>
                  </li>
                  <li>
                    <a href="#paying-on-the-gateway" class="toc-h2 toc-link" data-title="paying-on-the-gateway">Paying on the gateway</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#verifying-transaction-information" class="toc-h1 toc-link" data-title="verifying-transaction-information">Verifying transaction information</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#getting-transaction-data" class="toc-h2 toc-link" data-title="getting-transaction-data">Getting transaction data</a>
                  </li>
                  <li>
                    <a href="#getting-request-data" class="toc-h2 toc-link" data-title="getting-request-data">Getting request data</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#getting-request" class="toc-h1 toc-link" data-title="getting-request">Getting request</a>
          </li>
      </div>
        <ul class="toc-footer">
            <li><a href='https://request.network'>Visit request.network website</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p>Welcome to Request Network documentation for developers! Here is a guide on how to integrate a &quot;pay-with-request&quot; button for your website using request-network.js library.</p>

<p>For more information on how to use request-network.js library, please visit our <a href="https://github.com/RequestNetwork/requestNetwork/tree/master/packages/requestNetwork.js">github repository</a></p>

<!-- # How It Works

The principle is to 
Backend serve because uses private key and sensible data
 -->
<h1 id='getting-started'>Getting Started</h1><h2 id='dependencies'>Dependencies</h2>
<blockquote>
<p>Import the libraries in your backend:</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">RequestNetwork</span> <span class="o">=</span> <span class="nx">require</span> <span class="p">(</span><span class="s1">'@requestnetwork/request-network.js'</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">HDWalletProvider</span> <span class="o">=</span> <span class="nx">require</span> <span class="p">(</span><span class="s1">'truffle-hdwallet-provider'</span><span class="p">);</span>
</code></pre>
<p>You need to install the following depencies on your project first</p>

<p><strong>request-network.js</strong> <code>npm install @requestnetwork/request-network.js --save</code></p>

<p><strong>truffle-hdwallet-provider</strong>
<code>npm install truffle-hdwallet-provider</code></p>
<h2 id='instanciate-request-network-js'>Instanciate request-network.js</h2>
<blockquote>
<p>Example for creating a requestnetwork instance with HDWalletProvider on rinkeby testnet</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">mnemonic</span> <span class="o">=</span> <span class="s1">'twelve word mnemonic phrase of the wallet used for signing the requests'</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">provider</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">HDWalletProvider</span><span class="p">(</span><span class="nx">mnemonic</span><span class="p">,</span> <span class="s1">'https://rinkeby.infura.io/'</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">requestnetwork</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">RequestNetwork</span><span class="p">(</span><span class="nx">provider</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span> <span class="c1">// 4 is for rinkeby testnet (1 for mainnet)</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
<span class="p">}</span>
</code></pre>
<p>request-network.js needs a Web3 provider to sign requests.
Web3 library is a collection of modules which contain specific functionality for the ethereum ecosystem.</p>

<p>In this guide we use <strong>truffle-hdwallet-provider</strong> which instanciates a Web3 provider to sign transactions for addresses derived from a 12-word mnemonic phrase.</p>

<p><strong><code>new HDWalletProvider(mnemonic, provider_uri, index)</code></strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>mnemonic</td>
<td>string</td>
<td>12 word mnemonic which addresses are created from.</td>
</tr>
<tr>
<td>provider_uri</td>
<td>number</td>
<td>URI of Ethereum client to send all Web3 requests.</td>
</tr>
<tr>
<td>index</td>
<td>number (optional)</td>
<td>If specified, will tell the provider to manage the address at the index specified. Defaults to the first address (index 0).</td>
</tr>
</tbody></table>

<p>By default, the HDWalletProvider will use the address of the first address that&#39;s generated from the mnemonic. If you pass in a specific index, it will use that address instead. Currently, the HDWalletProvider manages only one address at a time.</p>

<p><strong><code>new RequestNetwork(provider, network_id)</code></strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>provider</td>
<td>object</td>
<td>Web3 Provider for the library to use.</td>
</tr>
<tr>
<td>networkId</td>
<td>number</td>
<td>network id you&#39;re using, <strong>must match the network of the provider&#39;s Ethereum client</strong>.</td>
</tr>
</tbody></table>
<h1 id='signing-a-request'>Signing a request</h1>
<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">requestData</span> <span class="o">=</span> <span class="p">{</span> <span class="na">reason</span><span class="p">:</span> <span class="s1">'Order #030890 from Just Another Shop'</span><span class="p">,</span>
                    <span class="na">orderId</span><span class="p">:</span> <span class="s1">'030890'</span> <span class="p">}</span>

<span class="kd">var</span> <span class="nx">signedRequest</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">requestnetwork</span><span class="p">.</span><span class="nx">requestEthereumService</span><span class="p">.</span><span class="nx">signRequestAsPayee</span><span class="p">(</span>
          <span class="p">[</span><span class="s1">'0x8F0255e24B99825e9AD4bb7506678F18C630453F'</span><span class="p">],</span>
          <span class="p">[</span><span class="s1">'175000000000000000'</span><span class="p">],</span>
          <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1000</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">60</span><span class="p">,</span> <span class="c1">// we put expiration after 1 hour here</span>
          <span class="p">[</span><span class="s1">'0xf9DF490146b29418a59F43dDb4Afc57Cd3fEf856'</span><span class="p">],</span>
          <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">requestData</span><span class="p">),</span>
        <span class="p">);</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"currencyContract"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xafa312973909c3a541665e11c883a24a8eb10b2c"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="s2">"QmSsrdAPhD5UkRVDKVpCwf63nrUxBaNbYmpZ2njbku9Mi5"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"expectedAmounts"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"175000000000000000"</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"expirationDate"</span><span class="p">:</span><span class="w"> </span><span class="mi">1522207081496</span><span class="p">,</span><span class="w">
  </span><span class="s2">"hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x0071762fae039b38da6c0685172c2de8df98eed1cbfc7b709bbe23df51c16fb3"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"payeesIdAddress"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"0x8F0255e24B99825e9AD4bb7506678F18C630453F"</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"payeesPaymentAddress"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"0xf9DF490146b29418a59F43dDb4Afc57Cd3fEf856"</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"signature"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x4708d801416d8ee4604af4bf8b3a2328592ab450d6a48c0d66446e26b51066cb2d2c568d37c38ae1bc3b48f1582e24b9c8b63bac9c548d8754f5d50b33e5fb491c"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong><code>async requestnetwork.requestEthereumService.signRequestAsPayee(payeesIdAddress, expectedAmounts, expirationDate, payeesPaymentAddress, data)</code></strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>payeesIdAddress</td>
<td>string[]</td>
<td>ID addresses of the payees (the position 0 will be the main payee, must be the signer address)</td>
</tr>
<tr>
<td>expectedAmounts</td>
<td>number[]</td>
<td>amount in Wei expected for each payee</td>
</tr>
<tr>
<td>expirationDate</td>
<td>number</td>
<td>Timestamp in seconds of the date after which the signed request is not broadcastable</td>
</tr>
<tr>
<td>payeesPaymentAddress</td>
<td>string<a href="optional"></a></td>
<td>Payment addresses of the payees (the position 0 will be the main payee)</td>
</tr>
<tr>
<td>data</td>
<td>String (optional)</td>
<td>Json string of the request&#39;s details (data will be hosted on ipfs)</td>
</tr>
</tbody></table>

<aside class="notice">
Signing a request costs no fee, as the request is not broadcasted on the blockchain until the payer accepts and pays it.
</aside>
<h1 id='using-request-network-39-s-gateway'>Using Request Network&#39;s gateway</h1>
<p>In order to ease the process for integrating a pay-with-request button on your website, the request app provides a gateway for displaying the info of a signed request and allowing someone to pay it.</p>
<h2 id='redirecting-to-gateway'>Redirecting to gateway</h2>
<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="nb">encodeURIComponent</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span><span class="na">signedRequest</span><span class="p">:</span> <span class="nx">signedRequest</span><span class="p">,</span> <span class="na">callbackUrl</span><span class="p">:</span> <span class="nx">myCallbackUrl</span><span class="p">}))};</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span> <span class="o">=</span> <span class="s1">'https://app.request.network/#/pay-with-request/'</span> <span class="o">+</span> <span class="nx">data</span><span class="p">;</span>
</code></pre>
<p>The gateway url is <code>https://app.request.network/#/pay-with-request/&lt;data&gt;</code></p>

<p>where data is a string of a JSON object containing the following <strong>mandatory</strong> parameters</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>signedRequest</td>
<td>object</td>
<td>signed request object (see paragraph above for format)</td>
</tr>
<tr>
<td>callbackUrl</td>
<td>string</td>
<td>url for the gateway to redirect after request has been paid</td>
</tr>
</tbody></table>
<h2 id='paying-on-the-gateway'>Paying on the gateway</h2>
<p>You can find an example of how a signed request looks like on the gateway on this <a href="https://app.request.network/#/pay-with-request/%7B%22signedRequest%22%3A%7B%22currencyContract%22%3A%220xafa312973909c3a541665e11c883a24a8eb10b2c%22%2C%22data%22%3A%22QmSsrdAPhD5UkRVDKVpCwf63nrUxBaNbYmpZ2njbku9Mi5%22%2C%22expectedAmounts%22%3A%5B%22175000000000000000%22%5D%2C%22expirationDate%22%3A1522207606766%2C%22hash%22%3A%220xb7bd2cd4fe422285c800d67901bc1e9ae2dbe43f72582a414e75a4500d8e0236%22%2C%22payeesIdAddress%22%3A%5B%220x8F0255e24B99825e9AD4bb7506678F18C630453F%22%5D%2C%22payeesPaymentAddress%22%3A%5B%220xf9DF490146b29418a59F43dDb4Afc57Cd3fEf856%22%5D%2C%22signature%22%3A%220x1bfbc84ff14364623f64ea46495174050eac773e30963039277d5d84730b1376048349585db51d3e1d20e5928bd0b514b298e1daae275caf294f17d20b52dad81c%22%7D%2C%22callbackUrl%22%3A%22http%3A%2F%2Flocalhost%3A4200%2F%23%2Fconfirm%2F%22%7D">link</a></p>

<p>On the gateway, the payer connects to his ether wallet and pays the request.</p>

<p>Once the payment transaction is broadcasted, the gateway redirect to the <strong>callbackUrl</strong> concatenated with string of the transaction hash.</p>

<p>Example:</p>

<p><code>https://myCallbackUrl/0xb8e90ba15bb09d1b5baba628fcc01d0302d8d47dc854e85e6deeb5c60f6d3f2b</code></p>

<p>Otherwise, if the payer click on &#39;cancel &amp; go back to merchant&#39;, the gateway will redirect to the <strong>callbackUrl</strong> concatenated with the signed request json object stringified.</p>

<aside class="success">
Your signature ensure that only the information you signed can be broadcasted on ethereum's blockchain
</aside>
<h1 id='verifying-transaction-information'>Verifying transaction information</h1>
<p>One can retrieve all the information of a transaction with only its tx hash. This allows the payer to have a seemless payment experience.</p>

<p>Merchant will then have to carry out a series of tests in order to verify the transaction does match a request you signed.</p>
<h2 id='getting-transaction-data'>Getting transaction data</h2>
<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code> <span class="k">try</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">txHash</span> <span class="o">=</span> <span class="mh">0xb8e90ba15bb09d1b5baba628fcc01d0302d8d47dc854e85e6deeb5c60f6d3f2b</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">requestnetwork</span><span class="p">.</span><span class="nx">requestCoreService</span><span class="p">.</span><span class="nx">getRequestByTransactionHash</span><span class="p">(</span><span class="nx">txHash</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"transaction"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"blockHash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x0000000000000000000000000000000000000000000000000000000000000000"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"blockNumber"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"from"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x1AA3fFefeaeC333f9BF76b705547D08c90cC1280"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"gas"</span><span class="p">:</span><span class="w"> </span><span class="mi">287504</span><span class="p">,</span><span class="w">
    </span><span class="s2">"gasPrice"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1000000000"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x8083f504e6f515a5c98debcbd54fd1c98c86d9eff7098d1b701e8eacbe5856e8"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"input"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x9dbdd85c00000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000000000000000000000000000000000000000018000000000000000000000000000000000000000000000000000000000000001c00000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000001626ac2d6390000000000000000000000000000000000000000000000000000000000000220000000000000000000000000000000000000000000000000000000000000008c8f0255e24b99825e9ad4bb7506678f18c630453f0000000000000000000000000000000000000000018f0255e24b99825e9ad4bb7506678f18c630453f000000000000000000000000000000000000000000000000026db992a3b180002e516d537372644150684435556b5256444b567043776636336e72557842614e62596d705a326e6a626b75394d693500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000f9df490146b29418a59f43ddb4afc57cd3fef8560000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000026db992a3b180000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004156d628e48ead956625124627ad2dafb4d51a9e913339038de8aeefd1b017fc921917a2c9d73e94d8836a757ac7722588063b907c14834f069627bf36a6ca0ef61b00000000000000000000000000000000000000000000000000000000000000"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"nonce"</span><span class="p">:</span><span class="w"> </span><span class="mi">79</span><span class="p">,</span><span class="w">
    </span><span class="s2">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xAFA312973909C3a541665e11C883a24a8eb10b2C"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"transactionIndex"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"175000000000000000"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"v"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x2c"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"r"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xbaf3e6351bd41581f3557a0baef9f63eaee184327b2f698a1b7697f70f9006fe"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"s"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x664b8f600a6ce7b0806780dfcc657e84dd281d2896289eaf11da9daf303e1640"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"method"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"broadcastSignedRequestAsPayer"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"parameters"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"0"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x8f0255e24b99825e9ad4bb7506678f18c630453f0000000000000000000000000000000000000000018f0255e24b99825e9ad4bb7506678f18c630453f000000000000000000000000000000000000000000000000026db992a3b180002e516d537372644150684435556b5256444b567043776636336e72557842614e62596d705a326e6a626b75394d6935"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"1"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"0xf9DF490146b29418a59F43dDb4Afc57Cd3fEf856"</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="s2">"2"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"175000000000000000"</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="s2">"3"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
        </span><span class="s2">"4"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1522209576505"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"5"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x56d628e48ead956625124627ad2dafb4d51a9e913339038de8aeefd1b017fc921917a2c9d73e94d8836a757ac7722588063b907c14834f069627bf36a6ca0ef61b"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"__length__"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w">
        </span><span class="s2">"_requestData"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x8f0255e24b99825e9ad4bb7506678f18c630453f0000000000000000000000000000000000000000018f0255e24b99825e9ad4bb7506678f18c630453f000000000000000000000000000000000000000000000000026db992a3b180002e516d537372644150684435556b5256444b567043776636336e72557842614e62596d705a326e6a626b75394d6935"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"_payeesPaymentAddress"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"0xf9DF490146b29418a59F43dDb4Afc57Cd3fEf856"</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="s2">"_payeeAmounts"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"175000000000000000"</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="s2">"_additionals"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
        </span><span class="s2">"_expirationDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1522209576505"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"_signature"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x56d628e48ead956625124627ad2dafb4d51a9e913339038de8aeefd1b017fc921917a2c9d73e94d8836a757ac7722588063b907c14834f069627bf36a6ca0ef61b"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>The library provides a method for getting the transaction information from a txHash:</p>

<p><strong><code>async requestnetwork.requestCoreService.getRequestByTransactionHash(txHash)</code></strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>txHash</td>
<td>string</td>
<td>hash of the ethereum transaction</td>
</tr>
</tbody></table>

<p>first condition to check is that <code>transaction.method.name == &#39;broadcastSignedRequestAsPayer&#39;</code></p>

<aside class="notice">
From that point if you stored the signed request information on a database, you just need to verify `transaction.method.parameters._signature` matches a known signature
And then verify the amount 
</aside>
<h2 id='getting-request-data'>Getting request data</h2>
<blockquote>
<p>Example:</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code><span class="nx">data</span> <span class="o">=</span> <span class="nx">requesnetwork</span><span class="p">.</span><span class="nx">requestCoreService</span><span class="p">.</span><span class="nx">parseBytesRequest</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">transaction</span><span class="p">.</span><span class="nx">method</span><span class="p">.</span><span class="nx">parameters</span><span class="p">.</span><span class="nx">_requestData</span><span class="p">);</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"creator"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x8f0255e24b99825e9ad4bb7506678f18c630453f"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"payer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x0000000000000000000000000000000000000000"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"mainPayee"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x8f0255e24b99825e9ad4bb7506678f18c630453f"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"expectedAmount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"26db992a3b18000"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"subPayees"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="s2">"QmSsrdAPhD5UkRVDKVpCwf63nrUxBaNbYmpZ2njbku9Mi5"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>If you need to verify additional information, the library provides a method for getting the request information from transaction bytes:</p>

<p><strong><code>requestnetwork.requestCoreService.parseBytesRequest(requestData)</code></strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>requestData</td>
<td>string</td>
<td>request data bytes</td>
</tr>
</tbody></table>
<h1 id='getting-request'>Getting request</h1>
      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="code">code</a>
          </div>
      </div>
    </div>
  </body>
</html>
